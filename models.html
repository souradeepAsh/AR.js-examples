<!DOCTYPE html>
<html>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <script src="js/aframe.min.js"></script>
  <script src="js/aframe-ar.js"></script>
  <body style="margin: 0px; overflow: hidden">
    <a-scene
      embedded
      vr-mode-ui="enabled: false;"
      arjs="debugUIEnabled: false;"
    >
      <a-marker type="pattern" url="data/kanji.patt">
        <!-- <a-entity
          position="0 0 0"
          rotation="0 0 0"
          scale="0.10 0.10 0.10"
          gltf-model="models/tree.gltf"
        ></a-entity>
        <a-entity
          position="1 1 1"
          rotation="0 0 0"
          scale="0.10 0.10 0.10"
          gltf-model="models/tree.gltf"
        ></a-entity> -->
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
    <script>
/*       
    First, a function named fetchdata is defined using the async keyword, which is used to fetch the data from the JSON file. 
    The await keyword is used to wait for the response from the server.
    Next, a function named converToString is defined, which takes an array as its argument and returns a string by joining the elements of the array with a space character.
    The fetchdata function is called, and the retrieved data is passed as an argument to the .then() method. This method is used to handle the response returned by the fetchdata function.
    Inside the .then() method, another function named createModelLoad is defined, which takes a single object (representing a 3D model) as its argument. This function converts the position, rotation, and scale properties of the object into a string format and uses them to create an HTML element for the 3D model using the a-entity tag.
    The marker variable is used to select the HTML element with the a-marker tag, and the insertAdjacentHTML method is used to insert the HTML element for each 3D model into the marker element.
*/      
const fetchdata = async () => {
        const response = await fetch("/data.json");
        const data = await response.json();
        return data;
      };
      const converToString = (arr) => {
        return arr.join(" ");
      };
      fetchdata().then((data) => {
        const createModelLoad = (model) => {
          let position = converToString(model.position);
          let rotation = converToString(model.rotation);
          let scale = converToString(model.scale);

          return `
           <a-entity
             position="${position}"
             rotation="${rotation}"
             scale="${scale}"
             gltf-model="${model.url}"
           ></a-entity>`;
        };

        const marker = document.querySelector("a-marker");

        for (let i = 0; i < data.length; i++) {
          const model = data[i];
          const modelLoad = createModelLoad(model);
          marker.insertAdjacentHTML("beforeend", modelLoad);
        }
      });
    </script>
  </body>
</html>
